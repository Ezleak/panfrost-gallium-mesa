diff a/src/panfrost/lib/wrap.h b/src/panfrost/lib/wrap.h	(rejected hunks)
@@ -42,20 +42,29 @@
  * included in-tree.
  */
 
-void pandecode_initialize(bool to_stderr);
+// TODO: update panwrap
+
+struct pandecode_context;
+
+struct pandecode_context *pandecode_create_context(bool to_stderr);
+
+void pandecode_next_frame(struct pandecode_context *ctx);
 
-void pandecode_next_frame(void);
+void pandecode_destroy_context(struct pandecode_context *ctx);
 
-void pandecode_close(void);
+void pandecode_inject_mmap(struct pandecode_context *ctx, uint64_t gpu_va,
+                           void *cpu, unsigned sz, const char *name);
 
-void
-pandecode_inject_mmap(uint64_t gpu_va, void *cpu, unsigned sz, const char *name);
+void pandecode_inject_free(struct pandecode_context *ctx, uint64_t gpu_va,
+                           unsigned sz);
 
-void pandecode_inject_free(uint64_t gpu_va, unsigned sz);
+void pandecode_jc(struct pandecode_context *ctx, uint64_t jc_gpu_va,
+                  unsigned gpu_id);
 
-void pandecode_jc(uint64_t jc_gpu_va, unsigned gpu_id);
+void pandecode_cs(struct pandecode_context *ctx, mali_ptr queue_gpu_va,
+                  uint32_t size, unsigned gpu_id, uint32_t *regs);
 
-void
-pandecode_abort_on_fault(uint64_t jc_gpu_va, unsigned gpu_id);
+void pandecode_abort_on_fault(struct pandecode_context *ctx, uint64_t jc_gpu_va,
+                              unsigned gpu_id);
 
 #endif /* __MMAP_TRACE_H__ */
